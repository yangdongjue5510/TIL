타임리프

## 선언

```html
<html xmlns:th="http://www.thymeleaf.org">
```



# 문자열

## html 속성 변경 th:xxx

```html
href="value1" th:href="value2"
```

이런 식으로 작성할 경우, 뷰템플릿을 통해 접근하면 value2가 적용되고, 그렇지 않을 경우 value1이 적용.

## URL 링크 표현식 @{...}

```html
th:href="@{URL}"
th:href="@{/basic/items/{itemId}(itemId=${item.id})}" 
th:href="@{/basic/items/{itemId}(itemId=${item.id}, query='test')}" 이렇게 쿼리파라미터 사용가능
```

## 리터럴 대체 "| ... |"

문자열과 표현식이 서로 구분되어야 한다.

@나 $를 문자열로 인식하면 안되기 때문이다.

```html
th:onclick="|location.href='@{/basic/items/add}'|"
```



# 변수



## 변수 표현 ${...}

```html
th:text="${item.price}"
```

## SpringEL 표현식

```html
${객체명.필드명}
${객체명['필드명']}
${객체명.get필드명()}
```

그냥 객체 이름을 통해서도 접근 가능하고,
문자열로 통해서도 접근 가능하고,
프로퍼티 접근을 통해서 접근 가능하다.

## 지역 변수

```html
th:with="변수명=${객체이름}"
```

이렇게 하면 선언한 태그 안에서만 유효한 지역변수를 선언할 수 있다.



# 기본 객체와 편의 객체

타임리프는 많이 사용되는 객체들은 직접 지원하고 있다.
직접 변수로 만들지 않아도 된다.

```html
기본 객체
${#request} 요청객체
${#response} 응답객체
${#session} http세션
${#servletContext} 서블릿 컨텍스트
${#locale} 지역정보

편의 객체
${param.paramData} 
요청파라미터 중 paramData를 직접 가져올 수 있다.

${session.sessionData} 
세션에 담아둔 sessionData를 그냥 가져올 수 있다.

${@helloBean.hello('Spring!')} 
스프링 bean도 이름을 통해 직접 접근가능하다.
```



##  유틸리티 객체와 날짜

유틸리티 객체는 종류가 엄청 많으니까 도큐멘트 참고하자.

https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#appendix-b-expression-utility-objects

### 자바 8 날짜

타임리프에서 자바8 날짜인 LocalDate, LocalDateTime, Instant를 쓰려면 라이브러리를 추가해야함.

**thymeleaf-extras-java8time** 부트에서는 자동으로 추가되어있다.

타임리프에서는 **#temporals**를 통해 날짜정보를 접근할 수 있다.

```html
<span th:text="${#temporals.format(localDateTime, 'yyyy-MM-dd HH:mm:ss')}"></span>
```



# URL 링크

 타임리프에서 여러 변수를 활용해서 링크를 만들 수 있다.

```html
기본적인 링크 /hello
th:href="@{/hello}"

경로변수 /hello/data1/data2
th:href="@{/hello/{param1}/{param2}(param1=${param1}, param2=${param2})}"

쿼리파라미터 /hello/data1?param2=data2
th:href="@{/hello/{param1}(param1=${param1}, param2=${param2})}"
```

즉 괄호 안에 있는 값들은, 경로 변수에 모두 매핑되고 나면, 모두 쿼리파라미터로 처리된다~!



# 리터럴

리터럴? 소스 코드 상에서 고정된 값을 말하는 용어

타임리프는 문자, 숫자, 불린, null을 리터럴로 인식한다.

특히 문자 리터럴은 항상 작은 따옴표로 감싸야하는데,
공백없이 이어지면 타임리프는 리터럴로 처리해준다.
(하지만 공백이 있으면 안됨.)

```html
<span th:text="'hello'"></span> 굳!
<span th:text="hello"></span> 굳!
<span th:text="'hello world!'"></span> 굳!
<span th:text="hello world!"></span> 안됨!!
```

## 리터럴 대체

리터럴이 너무 신경 쓸 일이 많다...
그래서 통째로 문자열로 해석해주는 리터럴 대체 방법이 있다.

```html
<sapn th:text="'hello '+${var1}"></sapn> 리터럴 방식..(번거롭다.)
<span th:text="|hello ${var1}|"></span> 리터럴 대체!
```



