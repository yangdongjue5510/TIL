# 다양한 메타 데이터를 읽을 수 있도록 하기

> 현재 MovieFinder라는 클래스는 csv파일을 통해 메타 데이터를 읽어오고 있는데, 
> xml파일도 읽어 오도록 한다면 어떻게 해야할까?



## 쉽고 위험한 방법 : 확장자별로 메소드 만들어서 분기처리

csv 파일이 오면 csv 파일을 읽는 메소드로 처리,
xml 파일이 오면 xml 파일을 읽는 메소드로 처리하면 어떨까?

문제는 **추후에 더 다양한 방식의 파일 형식을 요구하게 되면 매번 코드를 수정하게 된다.**

**코드 수정이 잦으면 버그 발생할 수 있다..!!!!**



## 상속을 이용한 방법

1. MovieFinder를 추상 클래스로 만들고, csv파일을 읽어오는 메소드도 추상 메소드로 바꾼다.

2. CsvMovieFinder를 만들어 MovieFinder를 상속하여 원래 csv파일을 읽어오는 메소드를 구현한다.

이렇게 되면 xml이 필요하면 XmlMovieFinder를 만들어 MovieFInder를 상속해서 메소드만 구현하면 된다.

**부모 클래스가 전체적인 흐름을 구현하고, 중간에 필요한 처리를 자식 클래스에게 위임**하는 것을 **템플릿 메서드 패턴**이라고함!

 

하지만 상속은

1. **캡슐화를 위반하고,**
2. **설계를 유연하게 하지 못함.**



## 합성을 이용하는 방법

추상 클래스를 통해 상속하는 방법 대신, 확장해야 할 부분을 인터페이스에게 역할을 줘서 합성하자.

이제 이 책임은 인터페이스와 메시지를 통해 수행하게 된다.

인터페이스를 구현하는 클래스가 csv 파일을 활용하거나, xml을 활용함으로써 다양한 형태의 파일을 읽을 수 있다.